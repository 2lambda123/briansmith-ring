language: rust
matrix:
  include:
    # The lines from "# BEGIN GENERATED" through "# END GENERATED" are
    # generated by running |python mk/update-travis-yml.py|. Any changes
    # made to those lines will be overwritten while other lines will be left
    # untouched.
    #
    # BEGIN GENERATED

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=stable MODE_X=DEBUG CC_x86_64_unknown_linux_musl=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=stable MODE_X=RELWITHDEBINFO CC_x86_64_unknown_linux_musl=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=stable MODE_X=RELWITHDEBINFO CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=stable MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=stable MODE_X=DEBUG CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=stable MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=stable MODE_X=DEBUG CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=stable MODE_X=RELWITHDEBINFO CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=nightly MODE_X=DEBUG CC_x86_64_unknown_linux_musl=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=nightly MODE_X=RELWITHDEBINFO CC_x86_64_unknown_linux_musl=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=nightly MODE_X=DEBUG CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=nightly MODE_X=RELWITHDEBINFO CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=nightly MODE_X=DEBUG CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=nightly MODE_X=DEBUG CARGO_INCREMENTAL=0 RUSTDOCFLAGS="-Cpanic=abort" RUSTFLAGS="-Ccodegen-units=1 -Clink-dead-code -Coverflow-checks=on -Cpanic=abort -Zpanic_abort_tests -Zprofile" KCOV=1 CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_RUNNER=mk/kcov.sh
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - kcov
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=nightly MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=nightly MODE_X=DEBUG CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=nightly MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=nightly MODE_X=DEBUG CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=nightly MODE_X=RELWITHDEBINFO CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: nightly
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=beta MODE_X=DEBUG CC_x86_64_unknown_linux_musl=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=x86_64-unknown-linux-musl RUST_X=beta MODE_X=RELWITHDEBINFO CC_x86_64_unknown_linux_musl=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=beta MODE_X=DEBUG CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=aarch64-unknown-linux-gnu RUST_X=beta MODE_X=RELWITHDEBINFO CC_aarch64_unknown_linux_gnu=aarch64-linux-gnu-gcc CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER=aarch64-linux-gnu-gcc
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-aarch64-linux-gnu
            - libc6-dev-arm64-cross
            - qemu-user-binfmt

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=beta MODE_X=DEBUG CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=beta MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_gnu=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_GNU_LINKER=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=beta MODE_X=DEBUG CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-musl RUST_X=beta MODE_X=RELWITHDEBINFO CC_i686_unknown_linux_musl=clang-10 CARGO_TARGET_I686_UNKNOWN_LINUX_MUSL_LINKER=clang-10
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - clang-10
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=beta MODE_X=DEBUG CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=arm-unknown-linux-gnueabihf RUST_X=beta MODE_X=RELWITHDEBINFO CC_arm_unknown_linux_gnueabihf=arm-linux-gnueabihf-gcc CARGO_TARGET_ARM_UNKNOWN_LINUX_GNUEABIHF_LINKER=arm-linux-gnueabihf-gcc
      rust: beta
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - binfmt-support
            - gcc-arm-linux-gnueabihf
            - libc6-dev-armhf-cross
            - qemu-user-binfmt

    - env: TARGET_X=x86_64-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG
      rust: stable
      os: linux
      dist: focal

    - env: TARGET_X=x86_64-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG
      rust: stable
      os: linux
      dist: trusty

    - env: TARGET_X=x86_64-unknown-linux-gnu RUST_X=stable MODE_X=RELWITHDEBINFO
      rust: stable
      os: linux
      dist: focal

    - env: TARGET_X=x86_64-unknown-linux-gnu RUST_X=stable MODE_X=RELWITHDEBINFO
      rust: stable
      os: linux
      dist: trusty

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG
      rust: stable
      os: linux
      dist: focal
      addons:
        apt:
          packages:
            - gcc-multilib
            - libc6-dev-i386

    - env: TARGET_X=i686-unknown-linux-gnu RUST_X=stable MODE_X=DEBUG
      rust: stable
      os: linux
      dist: trusty
      addons:
        apt:
          packages:
            - gcc-multilib
            - libc6-dev-i386

    # END GENERATED

script: if [[ "$TARGET_X" =~ ^a*.*linux-.* && "$MODE_X" == "RELWITHDEBINFO" ]]; then travis_wait 60 mk/travis.sh; else mk/travis.sh; fi
